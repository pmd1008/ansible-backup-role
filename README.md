Инструмент для резервного копирования на базе Ansible

Требования

Установленный Ansible (pip install ansible или через менеджер пакетов)
SSH-доступ ко всем нодам (исходным и целевой)
Настроенная аутентификация по SSH-ключам или паролям

Настройка


Отредактируйте inventory.yml:
Замените значения ansible_host на IP-адреса ваших исходных нод и целевой ноды.


Отредактируйте config.yml:
Укажите backup_source_dir — директорию на исходных нодах для резервного копирования.
Укажите backup_dest_path — директорию на целевой ноде для хранения резервных копий.


Проверьте SSH-доступ:
Убедитесь, что SSH-соединение работает для всех нод, указанных в inventory.yml.
Если используется аутентификация по паролю, добавьте ansible_password в inventory.yml или используйте ansible-vault для шифрования.



Использование
Запустите playbook:
ansible-playbook -i inventory.yml backup.yml

Что делает инструмент

Создает архив tar.gz из указанной директории на каждой исходной ноде.
Копирует архив на целевую ноду.
Удаляет временные файлы с исходных нод и управляющей машины.

Примечания

Убедитесь, что на целевой ноде достаточно места для хранения.
Имена файлов резервных копий включают имя хоста и временную метку для уникальности.
